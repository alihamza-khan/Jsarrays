<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced To-Do App</title>
<style>

* { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body { background: linear-gradient(135deg,#f8f9fa,#e9ecef); display:flex; justify-content:center; padding:50px 20px; }
.container { background:#fff; width:100%; max-width:600px; border-radius:20px; padding:30px; box-shadow:0 15px 35px rgba(0,0,0,0.15); }
h1 { text-align:center; color:#ff6b6b; margin-bottom:20px; }

form { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:20px; }
form input[type="text"], form input[type="date"], form select { flex:1; padding:12px 15px; border-radius:15px; border:1px solid #ccc; outline:none; font-size:1rem; }
form button { padding:12px 20px; border:none; border-radius:15px; background:#ff6b6b; color:#fff; cursor:pointer; transition:0.3s; }
form button:hover { background:#ff4757; }

.filters { display:flex; justify-content:center; gap:10px; margin-bottom:20px; }
.filters button { padding:8px 15px; border:none; border-radius:15px; cursor:pointer; background:#ff6b6b; color:#fff; transition:0.3s; }
.filters button:hover, .filters button.active { background:#ff4757; }

ul { list-style:none; }
li { background:#f0f0f0; padding:15px 20px; border-radius:15px; margin-bottom:12px; display:flex; justify-content:space-between; align-items:center; transition:0.3s; }
li.completed { text-decoration:line-through; opacity:0.6; background:#d3f8d3; }
.task-info { display:flex; flex-direction:column; }
.task-info span { margin-bottom:5px; }
.priority { padding:2px 8px; border-radius:10px; font-size:0.8rem; font-weight:bold; color:#fff; }
.priority.high { background:#e74c3c; }
.priority.medium { background:#f39c12; }
.priority.low { background:#2ecc71; }
.actions button { margin-left:5px; padding:6px 10px; border:none; border-radius:10px; cursor:pointer; transition:0.3s; }
.actions button.delete { background:#e74c3c; color:#fff; }
.actions button.toggle { background:#3498db; color:#fff; }
.actions button:hover { opacity:0.9; }
</style>
</head>
<body>

<div class="container">
<h1>To-Do App</h1>

<form id="todoForm">
<input type="text" id="todoInput" placeholder="Add a new task" required>
<select id="priority">
  <option value="high">High Priority</option>
  <option value="medium" selected>Medium Priority</option>
  <option value="low">Low Priority</option>
</select>
<input type="date" id="dueDate">
<button type="submit">Add</button>
</form>

<div class="filters">
<button data-filter="all" class="active">All</button>
<button data-filter="pending">Pending</button>
<button data-filter="completed">Completed</button>
</div>

<ul id="todoList"></ul>
</div>

<script>
const form = document.getElementById('todoForm');
const todoInput = document.getElementById('todoInput');
const prioritySelect = document.getElementById('priority');
const dueDateInput = document.getElementById('dueDate');
const todoList = document.getElementById('todoList');
const filterButtons = document.querySelectorAll('.filters button');

let todos = JSON.parse(localStorage.getItem('todos')) || [];

form.addEventListener('submit', e => {
  e.preventDefault();
  const task = todoInput.value.trim();
  if(task){
    todos.push({
      text: task,
      completed: false,
      priority: prioritySelect.value,
      due: dueDateInput.value
    });
    todoInput.value = '';
    dueDateInput.value = '';
    saveTodos();
    renderTodos();
  }
});

function renderTodos(filter='all'){
  todoList.innerHTML = '';
  todos.forEach((todo,index)=>{
    if(filter==='pending' && todo.completed) return;
    if(filter==='completed' && !todo.completed) return;

    const li = document.createElement('li');
    li.className = todo.completed ? 'completed' : '';
    li.innerHTML = `
      <div class="task-info">
        <span>${todo.text}</span>
        <span class="priority ${todo.priority}">${todo.priority}</span>
        ${todo.due ? `<span>Due: ${todo.due}</span>` : ''}
      </div>
      <div class="actions">
        <button class="toggle" onclick="toggleTodo(${index})">${todo.completed?'Undo':'Done'}</button>
        <button class="delete" onclick="deleteTodo(${index})">Delete</button>
      </div>
    `;
    todoList.appendChild(li);
  });
}

function toggleTodo(index){
  todos[index].completed = !todos[index].completed;
  saveTodos();
  renderTodos(getActiveFilter());
}

function deleteTodo(index){
  todos.splice(index,1);
  saveTodos();
  renderTodos(getActiveFilter());
}

function saveTodos(){
  localStorage.setItem('todos',JSON.stringify(todos));
}


filterButtons.forEach(btn => {
  btn.addEventListener('click',()=>{
    filterButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    renderTodos(btn.dataset.filter);
  });
});

function getActiveFilter(){
  return document.querySelector('.filters button.active').dataset.filter;
}


renderTodos();
</script>
</body>
</html>
